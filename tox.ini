[tox]
requires =
    tox>=4
    tox-uv>=1.29.0
env_list =
    py310
    py311
    py312
    py313

[testenv]
description = Run tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=8.0.0
    pytest-mock>=3.12.0
    pytest-cov>=6.0.0
commands =
    pytest --cov=transmission_cleaner --cov-report=term --cov-report=xml {posargs:tests}

[testenv:coverage]
description = Run tests with coverage report
deps =
    pytest>=8.0.0
    pytest-mock>=3.12.0
    pytest-cov>=6.0.0
commands =
    pytest --cov=transmission_cleaner --cov-report=term-missing --cov-report=html {posargs:tests}

[testenv:lint]
description = Run linting and type checking
deps =
    ruff>=0.14.10
    basedpyright>=1.36.1
commands =
    ruff check transmission_cleaner tests
    ruff format --check transmission_cleaner tests
    basedpyright transmission_cleaner

[testenv:format]
description = Format code with ruff
deps =
    ruff>=0.14.10
commands =
    ruff format transmission_cleaner tests
    ruff check --fix transmission_cleaner tests
